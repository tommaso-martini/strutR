% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/utils.R
\name{compute_weighted_avg_theta_by_depth}
\alias{compute_weighted_avg_theta_by_depth}
\title{Depth-averaged water content \eqn{\bar{\theta}(0\!-\!z^*)} for a stepwise profile}
\usage{
compute_weighted_avg_theta_by_depth(
  profile,
  depth_limit,
  theta_r,
  delta = 0,
  L = NULL,
  tol = 1e-12
)
}
\arguments{
\item{profile}{list of fronts \code{list(list(theta=..., x=...), ...)}.}

\item{depth_limit}{numeric; target depth \eqn{z^*} \link{m} for averaging.}

\item{theta_r}{numeric; residual water content (used for uncovered spans).}

\item{delta}{numeric; absolute depth origin \link{m} (default 0).}

\item{L}{optional numeric; lower bound of the domain \link{m}; used to cap \eqn{z^*}.}

\item{tol}{numeric; small tolerance for geometric comparisons.}
}
\value{
numeric scalar \eqn{\bar{\theta}(0\!-\!z^*)}; \code{NA} if \eqn{z^* \le \delta}.
}
\description{
Computes the arithmetic, thickness-weighted average of a piecewise-constant
\eqn{\theta(z)} profile from the absolute top \eqn{\delta} to a depth limit
\eqn{z^*} (clamped to \code{L} if provided). Segments are interpreted with
respect to absolute depths; uncovered portions default to \eqn{\theta_r}.
}
\examples{
prof <- list(list(theta = 0.18, x = 0.2), list(theta = 0.25, x = 0.6))
compute_weighted_avg_theta_by_depth(prof,
  depth_limit = 0.5,
  theta_r = 0.05, delta = 0, L = 1.0
)
}
